import numpy as np<br>
import pandas as pd<br>
import matplotlib.pyplot as plt<br>
import seaborn as sns<br>
<br>
# merge, concat 연습 2. 신생아 이름 데이터셋
<br>
- https://github.com/wesm/pydata-book/tree/3rd-edition/datasets/babynames<br>
- 데이터 파일들을 사용<br>
- 1880년부터 2010년까지 미국 신생아들의 이름, 성별, 출생자수가 정리된 파일<br>
- 파일을 하나씩 읽어서 데이터 프레임 생성하세요.<br>
- 생성된 데이터 프레임에 year 컬럼을 추가하세요. (1880년 파일은 year에 1880을 넣어라(파생 변수))<br>
- 생성된 131개의 데이터 프레임을 하나로 합치세요.<br>
- 연도별 신생아 수를 찾고 그래프를 그리세요.<br>
- 연도별 성별 신생아 수를 찾고 그래프를 그리세요.<br>

```python
y_df = {}
baby_df = []

for i in range(1880, 2011):
    file = f'https://github.com/wesm/pydata-book/raw/refs/heads/3rd-edition/datasets/babynames/yob{i}.txt'
    df = pd.read_csv(file, names = ['name', 'sex', 'no'])
    y_df[i] = df
    y_df[i]['year'] = i
    baby_df.append(y_df[i])
```
```python
df = pd.concat(baby_df)
df
```
![image](https://github.com/user-attachments/assets/7e8fa28b-5196-4a50-8c17-6095e847ae4b)

```python
df.info()
```
![image](https://github.com/user-attachments/assets/f64332be-b563-4313-8ea2-6559895a30a8)

```python
df.head()
```
![image](https://github.com/user-attachments/assets/8d9ef41d-f9b7-4504-9380-262a1367cf67)

```python
df.year.value_counts()
```
![image](https://github.com/user-attachments/assets/3b2e43fc-7f89-4f3f-b2b1-4a59740a30af)

```python
# 풀이
col_names = ['name', 'gender', 'births']    # 데이터프레임 컬럼 이름

yobs = []    # 각 연도의 데이터프레임을 저장할 빈 리스트
for year in range(1880, 2011):
    # txt 파일이 저장된 github 경로
    file_path = f'https://github.com/wesm/pydata-book/raw/refs/heads/3rd-edition/datasets/babynames/yob{year}.txt'
    # 파일을 읽어서 데이터프레임을 생성
    yob_year = pd.read_csv(file_path, names = col_names)
    # 데이터프레임에 year 파생변수를 추가
    yob_year['year'] = year
    # 생성된 데이터프레임을 리스트에 추가
    yobs.append(yob_year)
```
```python
len(yobs)    # 리스트의 원소 개수 - 데이터프레임 개수
```
![image](https://github.com/user-attachments/assets/87841aa5-9d18-414a-baa5-dffd88b53be6)

```python
yobs[0]    # 리스트의 첫번째 원소 -> 1880년 데이터프레임
```
![image](https://github.com/user-attachments/assets/ba7ae063-6703-4045-a76a-a0189010edb7)

```python
yobs[-1]    # 리스트의 마지막 원소 -> 2010년 데이터프레임
```
![image](https://github.com/user-attachments/assets/8b4e1e47-10d5-4520-a27d-eb83ec07e395)

```python
# 풀이
yob_df = pd.concat(yobs, ignore_index = True)    # index 무시
```
```python
yob_df.head()
```
![image](https://github.com/user-attachments/assets/25339519-91f9-4254-b5a3-0dad8cab20bc)

```python
yob_df.tail()
```
![image](https://github.com/user-attachments/assets/78632962-6243-4057-9b86-508e0bc48c1f)

```python
yob_df.info()
```
![image](https://github.com/user-attachments/assets/db5d186b-e5db-48e6-9ee5-9fac95f8dbf2)

## 연도별 신생아 수
```python
yob_by_year = yob_df.groupby(by = ['year']).births.sum()
```
```python
yob_by_year.head()
```
![image](https://github.com/user-attachments/assets/9d41bbd4-3297-4bc4-b3f8-7d8f4e4b7598)

```python
yob_by_year.tail()
```
![image](https://github.com/user-attachments/assets/a2e93213-3a30-4ae5-885f-e3320b93c816)

```python
sns.lineplot(data = yob_by_year)
plt.grid()
plt.show()
```
![image](https://github.com/user-attachments/assets/ca730403-2361-40bb-b367-7b031a6bd2d4)

## 연도별 성별 신생아 수

```python
yob_by_year_gender = yob_df.groupby(by = ['year', 'gender']).births.sum()
yob_by_year_gender
```
![image](https://github.com/user-attachments/assets/11e8ca41-1c14-401f-b78b-2254fbef6114)

```python
df_by_year_gender = yob_by_year_gender.reset_index()
df_by_year_gender
```
![image](https://github.com/user-attachments/assets/af9f515a-efb3-4633-a914-bae15e8e3328)

```python
sns.lineplot(data = df_by_year_gender, x = 'year', y = 'births', hue = 'gender')
plt.grid()
plt.show()
```
![image](https://github.com/user-attachments/assets/bfb6d789-bc9e-4e5e-b386-baf060f2eb77)

```python
# seaborn 모듈의 그래프 함수들은 그룹별 통계(평균, 합계, ...) 기능을 가지고 있음. 위에 그래프보다 시간이 더 걸림
sns.lineplot(data = yob_df, x = 'year', y = 'births', hue = 'gender', estimator = 'sum', errorbar = None)
plt.show()
```
![image](https://github.com/user-attachments/assets/dcc7c0c7-ed87-4014-8106-d9dd127b9469)

------
# Series 인덱스

## 단일 계층 인덱스
