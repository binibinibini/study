## DataFrame에서 row선택
- `data_frame.ilic[idx]`: ndarray의 정수 인덱스를 사용해서 행을 선택.
- `data_fame.loc[idx]`: DataFrame의 행 레이블(DataFrame.index)을 사용해서 행을 선택.
<br>

```python
df
```
![image](https://github.com/user-attachments/assets/939c26ef-ced8-48f5-971f-1ba00e5ae231)

```python
df.iloc[0]
```
![image](https://github.com/user-attachments/assets/13c527a3-5cf1-42ff-90dd-8d8ed00f412e)

```python
df.loc[0]
```
![image](https://github.com/user-attachments/assets/c0c5d40b-ed21-4dd0-babd-c097261072dd)

```python
df.iloc[5]  # df.iloc[-1]
```
![image](https://github.com/user-attachments/assets/b1085362-2be6-4437-a680-4797bdba33ca)

```python
df.loc[5]
# df.loc[-1] 에러 발생
```
![image](https://github.com/user-attachments/assets/fa8be5a0-7e1f-47a6-8c4c-d0aadb50a37c)

```python
df.iloc[:3]  # 첫 3개 행을 선택
```
![image](https://github.com/user-attachments/assets/814df571-04b5-4e4e-bff4-e53848e0cf0c)

```python
df.loc[:3]
```
![image](https://github.com/user-attachments/assets/e011f4b8-f6d0-4ee7-9a03-4c79aa8c1f01)

```python
df.loc[:2]
# df.loc[:3]와는 다른 결과!
```
![image](https://github.com/user-attachments/assets/17c5f0b7-b04a-460d-b84f-c227c5bfb4ee)

```python
# df.iloc[3:]
df.iloc[-3:]  # 마지막 3개 행을 선택
```
![image](https://github.com/user-attachments/assets/348b4c2f-af00-4a48-ac57-7cf227f8b0a2)

```python
# df.loc[-3:]  # 에러는 발생하지 않지만 마지막 3개 행을선택하는 기능은 아님!
df.loc[3:]
```
![image](https://github.com/user-attachments/assets/a559f98c-2ee7-4fb7-ac72-54c21930ae7f)
<br>
## Boolean indexing
- 조건을 ㅁ나족하는 행(row)들을 선택하는 방법.
- `data_frame[조건식]`
```python
df
```
![image](https://github.com/user-attachments/assets/316f0fae-bdd3-4ca3-931a-a85aa22cb4a3)
```python
df['city'] == '서울'
```
![image](https://github.com/user-attachments/assets/e062f19b-32d4-45af-8bb0-98fb3c129391)
```python
df[df.city == '서울']
```
![image](https://github.com/user-attachments/assets/0953114d-489d-48c9-9f97-183273ed4412)
```python
df[df.year == 2024]
```
![image](https://github.com/user-attachments/assets/1d6b6747-bb08-4667-a62f-cce23cd1da84)
<br>
- Boolean indexing에서는 논리연산자 and, or, not을 사용할 수 없음!
- 대신에 &, |, ~ 기호들을 사용해야 함.
- 반드시 ()를 사용해서 연산 순서를 명확히 해야 함.
```python
# 연도가 2023 또는 2024인 행들을 선택
df[(df.year == 2023) | (df.year == 2024)]
```
![image](https://github.com/user-attachments/assets/67454765-911e-4d34-86d2-c1fd586ba9d5)
```python
# 서울 2024 행을 선택
df[(df.city == '서울') & (df.year == 2024)]
```
![image](https://github.com/user-attachments/assets/b5ce4256-a3cd-4afc-987d-7ccdf095f6c3)
```python
# 2022년을 제외한 행들을 선택
df[df.year != 2022]
```
![image](https://github.com/user-attachments/assets/a4bc191a-dad0-4325-93e7-398d386e8c2f)
```python
df[~(df.year == 2022)]
```
![image](https://github.com/user-attachments/assets/4bc1196d-d714-4e05-b47e-51e86ee166b7)
<br>
# DataFrame 메서드
```python
df
```
![image](https://github.com/user-attachments/assets/6ced0dee-3371-4340-bc12-b9040fb3e6ed)
```python
df.info()  # DataFrame 요약 정보. obj는 str
```
![image](https://github.com/user-attachments/assets/9249f77b-632d-4287-b589-af8ba0b5dd05)
```python
# 숫자 타입 데이터의 기술 통계량: non-null 자료 개수, 평균, 표준편차, 최솟값, 1사분위값, 중위값, 3사분위값, 최댓값
df.describe()
```
![image](https://github.com/user-attachments/assets/0fc119e7-c88c-4532-ad02-4fc3fbfa2931)
```python
# 카테고리(범주) 타입 데이터의 기술 통계량: 빈도수
df.city.value_counts()
```
![image](https://github.com/user-attachments/assets/c09f7c63-da67-4914-ad9f-a48d2380bfe5)
```python
test_data = {'A': [1, None,2, 3], 'B': [None, None, None, 'qwer']}
test_df = pd.DataFrame(test_data)
test_df
```
![image](https://github.com/user-attachments/assets/f6dbf4f4-d1fb-4ebc-8991-4c274dc0021b)
```python
test_df.info()
```
![image](https://github.com/user-attachments/assets/24b7b9fa-06b9-459b-8b0d-251b8989ac7b)
```python
# 통계 메서드
print(df['pop'].mean())
print(df['pop'].std())
```
![image](https://github.com/user-attachments/assets/3fe732ac-b55d-4eb6-917a-dee7c07eb6cc)
```python
# 데이터프레임 df에서 pop의 값이 평균보다 큰 행들을 찾아보세요.
df[df['pop'] > df['pop'].mean()]
```
![image](https://github.com/user-attachments/assets/5bf7870e-ad68-47e1-8636-cbf86d553e7b)
<br>
```python
import pandas as pd
import seaborn as sns
```
# 예제 데이터셋 가져오기
```python
tips = sns.load_dataset('tips')
```
```python
tips.head()  # tips.iloc[:5] 같은 기능. 앞에서 5개 출력. 디폴트 아규먼트 값이 5
```
![image](https://github.com/user-attachments/assets/a3f04058-6e11-46c3-a0f1-55e0a4bf78fc)
<br>
# 연습문제
- DataFrame의 행과 열의 개수
- 열(column) 이름들
- 마지막 6개 행을 출력
- DataFrame의 요약 정보
- 숫자 타입 변수(컬럼)의 기술 통계량
- 카테고리 타입 변수(들)의 빈도수(여성은 몇명, 남성은 몇명...)
- total_bill 컬럼의 값이 최댓값인 행을 찾음.
- total_bill 컬럼의 값이 최솟값인 행을 출력
- 남성들의 tip의 평균
- 여성들의 tip의 평균
- 일요일의 tip의 평균
- 일요일 남성의 tip의 평균
- 일요일 여성의 tip의 평균
```python
# DataFrame의 행과 열의 개수
tips.shape
```
![image](https://github.com/user-attachments/assets/e1d8fa2e-46b9-425c-a316-aec39d578c41)
```python
# 풀이
print('# of rows:', tips.shape[0])
print('# of columns:', tips.shape[1])
```
![image](https://github.com/user-attachments/assets/e35227af-be1b-47c4-8cd9-f52d07a153a9)
```python
# 열(column)이름들
tips.columns
```
![image](https://github.com/user-attachments/assets/e695ec4e-fb48-46ce-bb70-2924eee5046c)
```python
# 풀이1
tips.columns

# 풀이2
for c in tips.columns:
    print(c)
```
![image](https://github.com/user-attachments/assets/09e0a4be-f2f4-4772-a8df-5979f8f6fc72)
```python
# 마지막 6개 행을 출력
tips.iloc[-6:]
```
![image](https://github.com/user-attachments/assets/62b5b295-94e8-41bd-a63f-689cfb368efb)
```python
# 풀이1
tips.tail(n = 6)

# 풀이2
tips.iloc[-6:]
```
![image](https://github.com/user-attachments/assets/f188093b-f5f5-4597-931f-32f071b28376)
```python
# DataFrame의 요약 정보
tips.info()
```
![image](https://github.com/user-attachments/assets/bbb0e2d6-16ba-48a1-afee-e483326cd2ae)
```python
# 숫자 타입 변수(컬럼)의 기술 통계량
tips.describe()
```
![image](https://github.com/user-attachments/assets/0250361f-4ed1-4d63-a997-e0fe6c1f5fa9)
```python
# 카테고리 타입 변수(들)의 빈도수
tips.sex.value_counts()
```
![image](https://github.com/user-attachments/assets/a75edd56-a4ff-429f-99db-9a4d7f3f2911)
```python
tips.smoker.value_counts()
```
![image](https://github.com/user-attachments/assets/c3a8c086-ccf3-417e-ae3a-30f0e5630671)
```python
tips.day.value_counts()
```
![image](https://github.com/user-attachments/assets/b90e086d-51be-43e3-af01-07d217cda9e3)
```python
tips.time.value_counts()
```
![image](https://github.com/user-attachments/assets/7673a034-56d4-40ad-b73f-117c872430fe)
```python
tips.size  # 행(244) * 열(7)의 값
```
![image](https://github.com/user-attachments/assets/4860c7eb-4fda-4064-ad96-63b1cedcd873)
```python
tips['size']
```
![image](https://github.com/user-attachments/assets/f41c52ad-78b9-4022-ad3f-341a4c303976)
```python
tips['size'].value_counts()
```
![image](https://github.com/user-attachments/assets/f6b1fd5a-bbe9-45cc-b2b5-38fd79d45122)
```python
# total_bill 컬럼의 값이 최댓값인 행을 찾음
tips.total_bill.max()
```
![image](https://github.com/user-attachments/assets/f01c71b0-db7e-41a1-a34a-d04890840f25)
```python
# 풀이
tips[tips.total_bill == tips.total_bill.max()]
```
![image](https://github.com/user-attachments/assets/7dfd87a5-eb16-403b-9394-c0719981ed58)
```python
# total_bill 컬럼의 값이 최솟값인 행을 출력
tips[tips.total_bill == tips.total_bill.min()]
```
![image](https://github.com/user-attachments/assets/74256b01-7453-412a-a3ee-cdb0ed08fad2)
```python
# tips[(영수증 == 최댓값) | (영수증 == 최솟값)]
tips[(tips.total_bill == tips.total_bill.max()) | (tips.total_bill == tips.total_bill.min())]
```
![image](https://github.com/user-attachments/assets/dc0dce16-d03a-499b-8518-4ad7615ac603)
```python
# 남성들의 tip의 평균
tips[tips.sex == 'Male'].tip.mean()
```
![image](https://github.com/user-attachments/assets/136db540-069a-4d8a-8bba-f81080ceb7e7)
```python
# 여성들의 tip의 평균
tips[tips.sex == 'Female'].tip.mean()
```
![image](https://github.com/user-attachments/assets/4f419dd0-147f-4563-9dd8-4e7f1c0e7630)
```python
# 일요일의 tip의 평균
tips[tips.day == 'Sun'].tip.mean()
```
![image](https://github.com/user-attachments/assets/4d737e14-4afe-4387-a527-0c53cc92d016)
```python
# 일요일 남성의 tip의 평균
tips[tips.day == 'Sun'].tip.mean()
```
![image](https://github.com/user-attachments/assets/37503c8f-e76e-43f3-9006-576fc8e30ae8)
```python
# 일요일 여성의 tip의 평균
tips[(tips.day == 'Sun') & (tips.sex == 'Female')].tip.mean()
```
![image](https://github.com/user-attachments/assets/2a8d2b0d-b461-4527-911f-57e133ab6c6e)
```python
tips[tips.tip > tips.tip.mean()]
```
![image](https://github.com/user-attachments/assets/e23897d9-5b6a-45a2-9ef8-ac969cf80714)
<br>
## 파생변수
```python
tips.head()
```
![image](https://github.com/user-attachments/assets/e6897168-5083-45b1-b7f6-38e88d8d908b)
```python
tips.tip / tips.total_bill
```
![image](https://github.com/user-attachments/assets/813e079a-3a97-4bfe-a2b8-0c3777992a14)
```python
x = {'a':1, 'b':2}
x['c'] = 11
x
```
![image](https://github.com/user-attachments/assets/5a2a7c88-5b2a-4745-a38e-fbdbc655a7eb)
```python
# 데이터프레임에 파생변수(새로운 컬럼)추가
tips['tip_ratio'] = tips.tip / tips.total_bill
```
```python
tips.head()
```
![image](https://github.com/user-attachments/assets/36c765f0-ed53-4533-b363-a732c409fc7a)
<br>
- 팁/영수증 비율의 평균값
- 팁/영수증 비율이 평균보다 큰 데이터
- 팁/영수증 비율이 평균보다 큰 데이터 중에서 남성/여성의 빈도수
```python
# 팁/영수증 비율의 평균값
tips.tip_ratio.mean()
```
![image](https://github.com/user-attachments/assets/cfb989cc-6b1c-4035-ba8b-999683680c53)
```python
# 팁/영수증 비율이 평균보다 큰 데이터
df = tips[tips.tip_ratio > tips.tip_ratio.mean()]
df
```
![image](https://github.com/user-attachments/assets/d6120aa2-43df-45ec-ab6b-9b792edfce7a)
```python
# 팁/영수증 비율이 평균보다 큰 데이터 중에서 남성/여성의 빈도수
df.sex.value_counts()
```
![image](https://github.com/user-attachments/assets/248f1960-40ba-4135-ba4e-40a968fcb34c)
```python
tips.sex.value_counts()
```
![image](https://github.com/user-attachments/assets/1015f6ad-fb10-49a5-b799-d89867d3bfa0)
```python
df.sex.value_counts() / tips.sex.value_counts()
```
![image](https://github.com/user-attachments/assets/a8544596-85cc-4b85-b635-a8f3184e1150)
<br>
# titanic 데이터셋
```python
titanic = sns.load_dataset('titanic')
```
```python
titanic.head() 
```
![image](https://github.com/user-attachments/assets/e9f3acc2-03fa-4d30-9f9f-69772ad4a3cc)
<br>
titanic 데이터프레임 컬럼
- survived: 생존 여부(0 = 사망, 1 = 생존)
  - alive 컬럼과 같은 내용(no = 사망, yes = 생존)
- pclass: 객실 등급
  - class 컬럼과 같은 내용(1 = First, 2 = Second, 3 = Third, ...)
- sex: 성별(male/female)
- who: 성인남성(man), 성인여성(woman), 어린이(child)
- adult_male: 성인 남성 여부(True/False)
- age: 나이
- sibsp: 동승한 형제자매 또는 배우자의 수
- parch: 동승한 부모 또는 자녀의 수
- alone: 혼자 탑승했는 지 여부(True/False)
- fare: 탑승권 가격. 운임.
<br>

```python
titanic.info()
```
![image](https://github.com/user-attachments/assets/e2ce8432-4d16-4bda-b886-d4411dfc0bd7)

## 카테고리(범주) 타입 변수 분석
```python
titanic.survived.value_counts()
```
![image](https://github.com/user-attachments/assets/2d914368-23c8-4a89-86da-7dedee1da7b6)

```python
titanic.alive.value_counts()  # survived랑 같음
```
![image](https://github.com/user-attachments/assets/72586f51-64ab-43b3-9e58-b3fb64b62cc4)

```python
titanic.sex.value_counts()
```
![image](https://github.com/user-attachments/assets/d2eae803-dbee-461d-8a01-8f0fd5165848)

```python
titanic.who.value_counts()
```
![image](https://github.com/user-attachments/assets/3e2e822f-9736-4d71-9b56-4f49c363f8c9)

```python
titanic.pclass.value_counts()
```
![image](https://github.com/user-attachments/assets/b6210231-f168-44bf-9466-e7bafcc81b35)

```python
titanic['class'].value_counts()
```
![image](https://github.com/user-attachments/assets/d7c37115-fed3-44ba-8ad9-1eab199687a6)

```python
titanic.embark_town.value_counts()
```
![image](https://github.com/user-attachments/assets/ab8bebe6-5e93-4769-8481-3f554785d2de)

<br>

## 성인남성/성인여성/어린이 생존자 비율

```python
alive_df = titanic[titanic.alive == 'yes']  # 생존자들만 저장된 DataFrame
```
```python
alive_df
```
![image](https://github.com/user-attachments/assets/6af54113-e04e-44f8-a9c4-22174fd1d51b)

```python
alive_df.who.value_counts()  # 전체 생존자
```
![image](https://github.com/user-attachments/assets/98124cde-a3ea-45b9-8f97-e666af40f1c4)
```python
titanic.who.value_counts()
```
![image](https://github.com/user-attachments/assets/93bce11f-fd1a-4818-bd6d-fec6672f9783)

```python
alive_df.who.value_counts() / titanic.who.value_counts()  # 어린이 중에서 어린이 생존자 ...
```
![image](https://github.com/user-attachments/assets/03c26219-657f-45e4-a150-ba438fbc6b76)

<br>

## 객실 등급별 생존 비율

```python
alive_df.pclass.value_counts()
```
![image](https://github.com/user-attachments/assets/7b0f61dd-14f7-4e80-a346-ee21541e31e2)

```python
titanic.pclass.value_counts()
```
![image](https://github.com/user-attachments/assets/2233275d-6a15-4609-aa58-a031ae1cd004)

```python
alive_df.pclass.value_counts() / titanic.pclass.value_counts()
```
![image](https://github.com/user-attachments/assets/51781648-9eab-46d2-b83c-36fe7a19f198)

<br>

## 각 객실 등급(First, Second, Third)에서 남성/여성/어린이 생존 비율

```python
# 풀이1
titanic[['pclass', 'who']].value_counts()
```
![image](https://github.com/user-attachments/assets/77d901df-f858-4d83-b332-d9beb7c0d8fc)

```python
alive_df[['pclass', 'who']].value_counts()
```
![image](https://github.com/user-attachments/assets/96b7dcf0-1b48-458d-a4f5-87cffcb6753e)

```python
# 결과
alive_df[['pclass', 'who']].value_counts() / titanic[['pclass', 'who']].value_counts()
```
![image](https://github.com/user-attachments/assets/4d4695f6-363e-4061-8d5b-354f0f353aa6)

```python
# 풀이 2
pclass1 = titanic[titanic.pclass == 1]
pclass1.head()
```
![image](https://github.com/user-attachments/assets/87e685ce-9310-47bc-8361-0d68b7cd98a1)

```python
# alive_pclass1 = titanic[(titanic.alive == 'yes') & (titanic.pclass == 1)] 이것도 가능
alive_pclass1 = pclass1[pclass1.alive == 'yes']
alive_pclass1.head()
```
![image](https://github.com/user-attachments/assets/1616f07b-c145-47fa-9a38-69f299bf50cb)

```python
alive_pclass1.who.value_counts()
```
![image](https://github.com/user-attachments/assets/cc25dc94-201c-470c-811d-cc9bbfa8131d)

```python
pclass1.who.value_counts()
```
![image](https://github.com/user-attachments/assets/507ba096-4dc5-4a9a-9130-63d1f1877fdc)

```python
alive_pclass1.who.value_counts() / pclass1.who.value_counts()
```
![image](https://github.com/user-attachments/assets/5cac572b-6e43-40b6-b5ce-f4fedb9a39a2)

```python
pclass2 = titanic[titanic.pclass == 2]
alive_pclass2 = pclass2[pclass2.alive == 'yes']
alive_pclass2.who.value_counts()
pclass2.who.value_counts()
alive_pclass2.who.value_counts() / pclass2.who.value_counts()
```
![image](https://github.com/user-attachments/assets/207fc822-fec5-4ee6-b2c3-3f535bfc7f4d)

```python
pclass3 = titanic[titanic.pclass == 3]
alive_pclass3 = pclass3[pclass3.alive == 'yes']
alive_pclass3.who.value_counts()
pclass3.who.value_counts()
alive_pclass3.who.value_counts() / pclass3.who.value_counts()
```
![image](https://github.com/user-attachments/assets/be92f8af-1b70-4346-a983-55cc5f7c1e72)

```python
# 풀이 3
# for c in sorted(titanic.pclass.unique()):  # unique한 것만
for c in range(1, 4):
    print(f'--- class {c} ---')
    subset = titanic[titanic.pclass == c]  # 객실 등급의 승객
    alive_subset = subset[subset.alive == 'yes']  # 객실에서 생존자
    print(alive_subset.who.value_counts() / subset.who.value_counts())
```
![image](https://github.com/user-attachments/assets/16c4ae68-88ab-45d7-b344-d92fc09df9d4)
