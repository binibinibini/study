# 1급 객체(first-class object)로서의 함수

**함수(function)는 객체(object)다**
- 객체(object): 숫자, 문자열, 논리값, list, tuple, dict,...
- 객체는 변수에 할당(저장)할 수 있음.
- 객체는 함수 아규먼트로 전달할 수 있음.   # len('abc')
- 객체는 함수가 리턴할 수 있음.   # len('abc') == 3
- 객체는 함수 내부에서 선언하고 사용할 수 있음.

```python
x = 1    # 정수 1을 변수 x에 할당
print(x)    # 정수 객체 x를 print 함수의 아규먼트로 전달.
```
![image](https://github.com/user-attachments/assets/8ad6a8e2-00bc-40e3-bd1d-e3a5cc7f1bcf)
```python
result = len('안녕~')    # 함수 len() 리턴값을 변수 result에 할당.
print(result)
```
![image](https://github.com/user-attachments/assets/85b6d493-9569-4b54-b5a1-42fb2878297c)
```python
def double(x):
    return x * 2
```
```python
print(double(11))    # double() 함수를 호출하고, 그 리턴값을 출력.
```
![image](https://github.com/user-attachments/assets/960b9303-a9eb-4d7a-b0e8-69a4c7b9fc63)
```python
print(double)    # 함수 객체 출력. print() 처럼 함수를 호출할땐 ()가 있어야 함. 이 경우는 함수를 부른게 아님
```
![image](https://github.com/user-attachments/assets/29b63ec2-1432-4d4b-ab42-2213f0f44544)
## 함수를 변수에 할당
```python
twice = double    # 함수 객체를 변수 twice에 할당.
print(twice)
```
![image](https://github.com/user-attachments/assets/84e98b5f-b359-4ca9-8fb3-dfa36ddc1e81)
```python
twice(12)    # twice라는 이름으로 함수 호출 가능해짐
```
![image](https://github.com/user-attachments/assets/d7b34d6b-5889-48e1-bbaf-8d64080283a8)
```python
result = double()    # double이라는 함수를 호출. x에 전달하는 값이 없어서 에러남.
```
![image](https://github.com/user-attachments/assets/f74e535c-bf28-4b4e-a51c-a87dfce2dde5)
```python
result = double(2)
result
```
![image](https://github.com/user-attachments/assets/9638762e-8fdd-4f87-873d-fea23dbc5d20)
## 아규먼트로 함수를 전달
```python
def calculator(x, y, fn):
    result = fn(x, y)
    return result
```
```python
def plus(x, y):
    return x + y
```
```python
calculator(1, 2, plus)
```
![image](https://github.com/user-attachments/assets/67da3070-2426-421f-ae4c-5e6aaf265ef5)
```python
def minus(x, y):
    return x - y
```
```python
calculator(1, 2, minus)
```
![image](https://github.com/user-attachments/assets/73d27bb2-f5fa-45d5-83b7-f120ef55596d)
```python
def is_greater(x, y):
    return x > y
```
```python
calculator(1, 2, is_greater)
```
![image](https://github.com/user-attachments/assets/a64d3a19-97d7-4127-bdf2-7ecfb9e37c80)
## 내부 함수, 함수를 리턴하는 함수

내부 함수(inner function), 지역 함수(local function):
- 함수 내부에서 선언하는 함수.
- 선언된 함수 안에서만 호출할 수 있음.
- 선언된 함수 바깥에서는 호출할 수 없음.
- 외부 함수의 지역 변수들(파라미터 포함)을 사용할 수 있음.

```python
def make_incrementor(n):
    # 내부 함수 선언.
    def add_n(x):
        return x + n
    # 함수 객체를 리턴.
    return add_n
```
```python
# 오류
def test(x):
    return x + n
test(1)
```
![image](https://github.com/user-attachments/assets/920afa12-3b51-4a51-94f5-59a9c59b80cf)
```python
add_n(10)    # 내부 함수 이름을 단독으로 사용할 수는 없음.
```
![image](https://github.com/user-attachments/assets/061174fd-b363-4b57-acf7-b9a4e3e06ddc)
```python
plus_2 = make_incrementor(2)
print(plus_2)
plus_2(10)
```
![image](https://github.com/user-attachments/assets/3df0b901-b5eb-4b79-8f72-afb426403d47)
```python
plus_10 = make_incrementor(10)
plus_10(10)
```
![image](https://github.com/user-attachments/assets/1566a3e4-a9bf-485c-8ce3-736e4475136d)
```python
make_incrementor(3)(123)
```
![image](https://github.com/user-attachments/assets/86d1e5b4-a66f-4bcd-9ffc-31bd26184379)
![image](https://github.com/user-attachments/assets/eceac6bd-e1c1-47a6-a832-24743ca69ada)

# 람다 표현식(Lambda Expression)
- 이름이 없는 함수.
- 함수 이름 선언 없이, 파라미터 선언과 반환 값 또는 반환 식으로 함수를 선언하는 것.
- 람다 표현식 변수에 할당할 수 있음. **함수의 아규먼트로 람다 표현식을 사용**할 수 있음.
- 문법
```python
lambda param1, param2, ...: expression(식)
```
```python
함수 선언
def plus_one(x):
    return x + 1
```
```python
# 람다 표현식
plus_one = lambda x: x + 1
print(plus_one)
plus_one(11)
```
![image](https://github.com/user-attachments/assets/fa7c00f3-a233-4562-bb9c-4f1f781c65eb)
```python
calculator(11,22, lambda x, y: x + y)
```
![image](https://github.com/user-attachments/assets/c9dfaead-4516-4af3-be34-d5dd14ea312c)
```python
calculator(1, 2 lambda x, y: x - y)
```
![image](https://github.com/user-attachments/assets/249efb9d-e2f6-4f6d-a1d5-64efdfa272c2)
```python
calculator(3, 1 lambda x, y: x > y)
```
## lambda를 아규먼트로 전달하는 예
- filter: 조건을 만족하는 아이템들을 찾기.
  - filter(function, iterable): iterable의 원소들을 하나씩 순서대로 function의 아규먼트로 전달해서, function이 True를 리턴하는 원소들만 선택.
    - function(x) ==> True/False
- map: 아이템을 일정한 규칙에 따라서 다른 값으로 변환(매핑).
  - map(function, iterable): iterable의 원소들을 하나씩 순서대로 functin 아규먼트로 전달해서, function이 리턴하는 값들을 저장.
    - function(x) ==> object
```python
import random
```
```python
numbers = [random.randrange(100) for _ in range(10)]
numbers
```
![image](https://github.com/user-attachments/assets/7bb6a28b-564d-4ebc-aea7-26195f29791a)
```python
# 리스트 numbers의 원소들 중에서 홀수들만 필터링.
[x for x in numbers if x % 2]
```
![image](https://github.com/user-attachments/assets/d4af6b4e-121a-4876-84a2-c318afce3eb8)
```python
result = filter(lambda x: x % 2 == 1, numbers)
list(result)
```
![image](https://github.com/user-attachments/assets/5bf267a5-ebf6-46bd-b710-37e773fd525b)
```python
# numbers의 원소들 중에서 짝수들만 필터링
result = filter(lambda x: x % 2 == 0, numbers)
list(result)
```
![image](https://github.com/user-attachments/assets/3380be84-1d23-4578-8f5e-4f839faf6845)
```python
# 리스트 numbers의 원소가 짝수인 경우에는 'even', 홀수인 경우에는 'odd'로 매핑
['even' if x % 2 == 0 else 'odd' for x in numbers]
```
![image](https://github.com/user-attachments/assets/9c61df3e-9751-4849-89fe-0896ebe0d174)<br>
numbers의 원소가 0 ~ 19이면 'teen', 20 ~ 59이면 'adult', 60 이상이면 'senior'로 매핑
```python
result = map(lambda x: 'teen' if x < 20 else ('adult' if x < 60 else 'senior'), numbers)
list(result)
```
![image](https://github.com/user-attachments/assets/08927dd6-f2b3-4ba3-8178-c2d2428a1597)
## filter 함수 구현
```python
def my_filter(iterable, function):
    """
    iterable의 아이템들 중에서 function의 결과가 True가 되는 아이템들로 이루어진 리스트를 리턴.

    @param iterable - list 또는 tuple
    @param function - 아규먼트가 1개이고 리턴값은 True/False인 함수.
    @return 리스트(list).
    """
    # result = []     # 필터링한(조건을 만족하는) 아이템들을 저장하기 위한 빈 리스트.
    # for x in iterable:      #iterable의 원소들을 순서대로 하나씩 순회하면서 
    #     if function(x):     #원소를 function의 아규먼트로 전달했을 때 True를 리턴하면(조건을 만족하면)
    #         result.append(x)    # 리스트에 추가

    result = [x for x in iterable if function(x)]

    return result
```
```python
numbers = [random.randrange(10) for _ in range(10)]
print(numbers)
evens = my_filter(numbers, lambda x: x % 2 == 0)
print(evens)
```
![image](https://github.com/user-attachments/assets/0cb5c97a-d842-43ff-8848-85e4efe00144)
```python
numbers = [random.randrange(10) for _ in range(10)]
print(numbers)
positives = my_filter(number, lambda x: x > 0)
print(positives)
```
![image](https://github.com/user-attachments/assets/28ce0699-c3a3-41db-bb76-86f24dc278c6)
```python
languages = ['Python', 'SQL', 'Java', 'JavaScript', 'R']

# languages의 문자열들 중에서 길이가 5 이상인 문자열들을 필터링
result = my_filter(languages, lambda x: len(x) >= 5)
print(result)
```
![image](https://github.com/user-attachments/assets/1e5dec41-4066-44cd-b62a-571bf8cd3436)
## map 함수 구현
```python
def my_map(iterable, function):
    """
    iterable의 원소를 함수 function의 아규먼트로 전달했을 때 그 리턴 값들을 저장한 리스트를 리턴.

    @param iterable - list 또는 tuple.
    @param function - 아규먼트가 1개 이고, 리턴값이 있는 함수.
    @return list.
    """
    result = [function(x) for x in iterable]
    return result
```
```python
numbers = [random.randrange(10) for _ in range(10)]
print(numbers)
result = my_map(numbers, lambda x: '짝수' if x % 2 == 0 else '홀수')
print(result)
```
![image](https://github.com/user-attachments/assets/5d94ce61-6695-4f91-a5e9-aa8291a3117a)
```python
numbers = [random.randrange(10) for _ in range(10)]
print(numbers)
result = my_map(numbers, lambda x: x**2)
print(result)
```
![image](https://github.com/user-attachments/assets/02b02d47-6e3a-4914-87b7-60616605a4c9)
```python
languages = ['Python', 'SQL', 'Java', 'JavaScript', 'R']

# languages의 문자열을 그 문자열의 길이로 매핑
result = my_map(languages, lambda x : len(x))
print(result)
```
![image](https://github.com/user-attachments/assets/9fa43fd0-a56f-4d3d-a509-99ebc82c6bf1)
```python
s = "Hello Python!"
print(len(s))
print(s.upper())

s2 = '안녕, python...'
print(s2.upper())
```
![image](https://github.com/user-attachments/assets/ec262b82-cc05-49b2-acd7-7f7b7b5c541b)
```python
my_list = [1, 2, 3]
my_list.append(100)
my_list
```
![image](https://github.com/user-attachments/assets/b739782d-f1c0-4430-8e0d-b6e069e5bdc9)

# 객체지향 프로그래밍 배경
```python
students = [
    {'id': 1, 'name':'홍길동', 'korean': 100, 'english': 80, 'math': 95},
    {'id': 2, 'name':'오쌤', 'korean': 50, 'english': 45, 'math': 61},
    {'id': 3, 'name':'Scott', 'korean': 70, 'english': 99, 'math': 78}
]
```
```python
# 번호, 이름, 총점, 평균을 출력
for i in students:
    total = i['korean'] + i['english'] + i['math']
    mean = total / 3
    print(f"번호: {i['id']}, 이름: {i['name']}, 총점: {total}, 평균: {mean}")
```
![image](https://github.com/user-attachments/assets/7a51f651-bd8b-4e43-a2bf-70e8bede9800)
<br>
위 코드의 문제점은 dict의 키는 중복되지만 않게 만들면 되기 때문에, 반복문에서 총점과 평균을 계산하는 코드가 제대로 동작하지 않을 수도 있음.

## 함수형 프로그래밍(Functional Programming)
```python
def create_student(id, name, korean, english, math):
    student = {
        'id':id,
        'name': name,
        'korean':korean,
        'english': english,
        'math':math
    }
    return student
```
```python
students = [
    create_student(1, '홍길동', 100, 95, 98), 
    create_student(2, '오쌤', 50, 45, 39),
    create_student(3, 'Scott', 88, 99, 75)
]
students
```
![image](https://github.com/user-attachments/assets/e65b914b-46d9-4388-842d-964935c99965)
```python
def get_total(student):
    return student['korean'] + student['english'] + student['math']
```
```python
def get_mean(student):
    return get_total(student)/3
```
```python
for s in students:
    total = get_total(s)
    mean = get_mean(s)
    print(f"번호: {s['id']}, 이름: {s['name']}, 총점: {total}, 평균: {mean}")
```
![image](https://github.com/user-attachments/assets/2792a638-d0cc-45c7-ab29-a6ad0ac21756)
<br>
get_total 함수와 get_mean 함수는 학생 객체(dict)의 데이터와 매우 밀접한 관계를 가지고 있음.<br>
데이터(국어, 영어, 수학 점수)와 기능(총점 계산, 평균 계산)이 매우 밀접하게 연결되어 있음.<br>
데이터와 기능을 하나의 자료 타입으로 묶을 수 없을까?

## 객체 지향 프로그래밍(OOP: Object-Oriented Programming)
```python
class Student:
    # 생성자
    def __init__(self, id, name, korean, english, math):
        self.id = id
        self.name = name
        self.korean = korean
        self.english = english
        self.math = math

    # 매서드(method)
    def get_total(self):
        return self.korean + self.english + self.math

    def get_mean(self):
        return self.get_total()/3
```
```python
student1 = Student(1, '홍길동', 100, 98, 96)
print(student1)
print(student1.id)
print(student1.name)
print(student1.korean)
print(student1.get_total())
print(student1.get_mean())
```
![image](https://github.com/user-attachments/assets/772d2925-5aa8-4e36-a42e-c7139f24beea)
```python
students = [
    Student(1, '홍길동', 100, 98, 96),
    Student(2, '오쌤', 55, 65, 77),
    Student(3, 'Scott', 88, 99, 86)
]
students
```
![image](https://github.com/user-attachments/assets/22d5a75f-2586-4114-a5a8-ea933c6a918a)
```pyhon
for s in students:
    print(f'번호: {s.id}, 이름: {s.name}, 총점: {s.get_total()}, 평균: {s.get_mean()}')
```
![image](https://github.com/user-attachments/assets/399afa62-35e0-4c47-8fe2-1cb34684e3ba)
